# 进程和线程的区别

* 进程是分配资源的基本单位，线程是CPU调度的基本单位。
* 进程有独立的地址空间，线程共享本进程的地址空间，从而能访问相同的数据。但是线程也有自己独立的程序计数器PC，每个线程也有自己的一组用于计算的寄存器。
* 线程的切换和进程的切换类似，当从一个线程切换到另一个线程时，会发生上下文切换。对于 进程，上下文切换时将状态保存到进程控制块（PCB），线程切换时将状态保存到线程控制块（TCB）。与进程相比，线程上下文切换时，地址空间保持不变，所以不需要切换当前使用的页表。同时由于线程共享数据，因此线程的切换消耗的资源更少，效率更高。
* 线程和进程之间的另一个主要区别在于栈，传统的进程地址空间模型（或者叫做单线程进程）中，只有一个栈。但是在多线程进程中，每个线程独立运行，每个线程都可以调用各种例程来完成工作，所以每个线程都有一个栈。
* 一个进程崩溃之后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃会让本进程的所有线程都崩溃。
* 执行时，每个独立的进程都有一个程序运行的入口，但是线程不能独立执行，必须依存于进程。

## 进程创建函数

```c++
#include <stdio.h>
#include <pthread.h>
#include <assert.h>

void *mythread(void* arg) {
    printf("%s\n", (char*)arg);
    return NULL;
}
int main() {
    pthread_t p1, p2;
    // param1:线程地址，param2:NULL(默认),para3:要调用的函数，para4:调用函数的参数
    int rc;
    rc = pthread_create(&p1, NULL, mythread, "A");	assert(rc == 0);
    rc = pthread_create(&p2, NULL, mythread, "B");	assert(rc == 0);
    // join wait for the threads to finish
    rc = pthread_join(p1, NULL); assert(rc == 0);
    rc = pthread_join(p2, NULL); assert(rc == 0);
    printf("main: end\n");
    return 0;
}
```

